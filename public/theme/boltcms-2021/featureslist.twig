{% extends 'partials/_master.twig' %}

{% block main_container %}
    {# <h1>{{ record.title }}</h1> #}

    {% set current = app.request.requestUri|split('/')|last %}

    {% if current == 'features-developers' %}
        {% setcontent features = 'features' where { audience: 'developers' } order "order" %}
        <div class="subheader">
            <h1 class="drop-left">Features for
                <div class="slidingVertical">
                    <span>developers</span>
                    <span>you</span>
                </div>
            </h1>
            <div class="button-row">
                {% include "partials/_features_buttons.twig" %}
            </div>
        </div>
        {% set title = 'For developers' %}
    {% elseif current == 'features-designers' %}
        {% setcontent features = 'features' where { audience: 'designers' } order "order" %}
        <div class="subheader">
            <h1 class="drop-left">Features for
                <div class="slidingVertical">
                    <span>designers</span>
                    <span>you</span>
                </div>
            </h1>
            <div class="button-row">
                {% include "partials/_features_buttons.twig" %}
            </div>
        </div>
        {% set title = 'For designers' %}
    {% elseif current == 'features-editors' %}
        {% setcontent features = 'features' where { audience: 'editors' } order "order" %}
        <div class="subheader">
            <h1 class="drop-left">Features for
                <div class="slidingVertical">
                    <span>editors</span>
                    <span>you</span>
                </div>
            </h1>
            <div class="button-row">
                {% include "partials/_features_buttons.twig" %}
            </div>
        </div>
        {% set title = 'For editors' %}
    {% else %}
        {# Assume we want to show all #}
        {% setcontent features = 'features' where { audience: 'overview' } order "order" %}
        <div class="subheader">
            <h1 class="drop-left">Features for
                <div class="slidingVertical">
                    <span>developers</span>
                    <span>designers</span>
                    <span>editors</span>
                    <span>you</span>
                </div>
            </h1>
            <div class="button-row">
                {% include "partials/_features_buttons.twig" %}
            </div>
        </div>
        {% set title = 'For developers, designers and editors' %}
    {% endif %}

    <div class="content-wrapper">
        <div class="content-block">
            <a id="developer"></a>
            <div class="title">
                <h2>{{ title }}</h2>
            </div>
            <div class="features">
                {% for feature in features %}
                    <div class="detail">
                        <h3>{{ feature.title }}</h3>

                        <p>{{ feature.content }}</p>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

    {% include "partials/_bottom-block.twig" %}

    <script>
        window.addEventListener('load', function () {
            baguetteBox.run('.zoom-images');
        });
    </script>

{% endblock main_container %}
